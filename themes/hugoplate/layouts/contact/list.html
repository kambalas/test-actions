{{ define "main" }}
{{ partial "page-header" . }}

<section class="section-sm">
  <div class="container">
    <div class="row">
      <div class="md:col-10 lg:col-6 mx-auto">
        <p class="mb-6 text-gray-700">
          {{ T "contact_intro" }}
        </p>
        <div class="mb-10 p-6 rounded-2xl shadow bg-gray-50">
          <h2 class="text-2xl font-semibold mb-4">Nordics Software, UAB</h2>
          <ul class="space-y-2 text-gray-700">
            <li><strong>{{ T "phone-nr" }}:</strong> +370 665 00016
            <li>
            <li><strong>{{ T "email" }}:</strong> info@nordicssoftware.lt </li>
          </ul>
        </div>

        <!-- Contact Form -->
        <form id="contact-form" action="{{ site.Params.contact_form_action }}" method="POST">
          <!-- Full Name -->
          <div class="mb-6">
            <label for="name" class="form-label">
              {{ T "full_name" }} <span class="text-red-500">*</span>
            </label>
            <input id="name" name="name" class="form-input" placeholder="John Doe" type="text" required />
          </div>

          <!-- Email -->
          <div class="mb-6">
            <label for="email" class="form-label">
              {{ T "email" }} <span class="text-red-500">*</span>
            </label>
            <input id="email" name="email" class="form-input" placeholder="john.doe@email.com" type="email" required />
          </div>

          <!-- Phone -->
          <div class="mb-6">
            <label for="phone" class="form-label">
              {{ T "phone" }} <span class="text-red-500">*</span>
            </label>
            <input id="phone" name="phone" class="form-input" placeholder="+370 600 00000" type="tel" required />
          </div>

          <!-- Message -->
          <div class="mb-6">
            <label for="message" class="form-label">
              {{ T "message" }} <span class="text-red-500">*</span>
            </label>
            <textarea id="message" name="message" class="form-input" placeholder="{{ T " message_placeholder" }}"
              rows="8" required></textarea>
          </div>
          <div class="mb-6 flex items-start">
            <input id="consent" name="consent" type="checkbox" class="mt-1 mr-2" value="true" required />
            <label for="consent" class="form-label">
              {{ T "agree_" | safeHTML }}
            </label>
          </div>
          <div id="form-message" class="contact-message hidden">
            âœ… Your message was sent. We will get back to you shortly.
          </div>
          <button type="submit" class="btn btn-primary" id="submit-button">
            Submit
          </button>
        </form>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const form = document.getElementById("contact-form");
    const messageEl = document.getElementById("form-message");
    const submitBtn = document.getElementById("submit-button");

    if (!form || !messageEl || !submitBtn) return;

    form.addEventListener("submit", async function (e) {
      e.preventDefault();

      const formData = new FormData(form);

      try {
        const response = await fetch(form.action, {
          method: "POST",
          body: formData,
        });

        if (response.ok) {
          messageEl.classList.remove("hidden");
          submitBtn.classList.add("hidden");

          setTimeout(() => {
            messageEl.classList.add("hidden");
            submitBtn.classList.remove("hidden");
          }, 10000);

          form.reset();
        } else {
          alert("Something went wrong. Please try again.");
        }
      } catch (error) {
        alert("There was a problem submitting the form.");
      }
    });
  });
</script>
{{ end }}
